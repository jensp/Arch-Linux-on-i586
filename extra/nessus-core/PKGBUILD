# $Id: PKGBUILD 41896 2009-06-07 21:02:47Z eric $
# Maintainer: Kevin Piche <kevin@archlinux.org>
# Contributor: Markus Meissner <markus@meissna.de>

pkgname=nessus-core
pkgver=2.2.11
pkgrel=1
pkgdesc='The nessus core'
arch=(i586 i686 x86_64)
url="http://www.nessus.org"
license=('GPL2')
depends=("libnasl>=${pkgver}" 'gtk2')
options=('!makeflags')
source=('http://downloads.nessus.org/nessus3dl.php?file=nessus-core-2.2.11.tar.gz&licence_accept=yes&t=b2e0ea50e3d01734b497ca1f8025416b'
	nessusd)
md5sums=('b778c4c8e0eee912c7d62b80de920ef4' '03ab960ae42b0dadebd0973d9a191048')

build() {
  cd ${srcdir}/${pkgname}
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --mandir=/usr/share/man || return 1
  make NESSUSD_STATEDIR=/var/nessus || return 1
  make install DESTDIR=${pkgdir} || return 1
  install -D -m755 ${srcdir}/nessusd ${pkgdir}/etc/rc.d/nessusd
  rm ${pkgdir}/usr/include/nessus/includes.h
}
